<html>
<head>
  <script type="text/javascript"
      src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js">
  </script>
</head>
<body>
  <cast-media-player crossorigin=""></cast-media-player>
  <iframe class="screencast-iframe"></iframe>
  
  <script>
    const context = cast.framework.CastReceiverContext.getInstance();
    const playerManager = context.getPlayerManager();

    playerManager.setMessageInterceptor(
      cast.framework.messages.MessageType.LOAD, loadRequestData => {
        const error = new cast.framework.messages.ErrorData(
                        cast.framework.messages.ErrorType.LOAD_FAILED);
        if (!loadRequestData.media) {
          error.reason = cast.framework.messages.ErrorReason.INVALID_PARAM;
          return error;
        }

        if (!loadRequestData.media.entity) {
          return loadRequestData;
        }

        if (loadRequestData.media.entity == "screencast") {
          document.getElementById("screencast-iframe").src = loadRequestData.media.contentUrl;
          return null;
        }
        
        return loadRequestData;
    });

    context.start();
  </script>
</body>
</html>