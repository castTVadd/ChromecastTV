<html>
<head>
  <script type="text/javascript"
      src="cast_receiver_framework.js">
  </script>
</head>
<body>
  <cast-media-player crossorigin=""></cast-media-player>
  <iframe id="screencast"></iframe>
  
  <script>
    const context = cast.framework.CastReceiverContext.getInstance();
    const playerManager = context.getPlayerManager();

    playerManager.setMessageInterceptor(
      cast.framework.messages.MessageType.LOAD, loadRequestData => {
        const error = new cast.framework.messages.ErrorData(
                        cast.framework.messages.ErrorType.LOAD_FAILED);
        if (!loadRequestData.media) {
          error.reason = cast.framework.messages.ErrorReason.INVALID_PARAM;
          return error;
        }

        //loadRequestData.media.contentUrl = 'http://192.168.100.6:9182/CORS/' + loadRequestData.media.contentUrl;

        if (!loadRequestData.media.entity) {
          return loadRequestData;
        }

        //document.getElementById('screencast').src = loadRequestData.media.contentUrl;
        
        return loadRequestData;
    });

    context.start();
  </script>
</body>
</html>